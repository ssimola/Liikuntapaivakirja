<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: useform.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: useform.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState } from 'react'
/**
 * @typedef  {Object} useFormObject
 * @property {function} handleChange
 *           Lomakekentän onChange-käsittelijä.
 * @property {function} handleSubmit
 *           Lomakkeen onSubmit-käsittelijä.
 * @property {function} resetValues
 *           Alustaa lomakkeen tiedot alkutilanteeseen.
 * @property {function} setValues
 *           Lomaketietojen päivitysfunktio, tätä ei normaalisti tarvita.
 * @property {Object} values
 *           Lomakkeen tiedot.
 */

/**
 * React Hook, joka huolehtii lomakekenttien muutoksista ja 
 * lomaketietojen lähetyksestä.
 * 
 * @example
 * import useForm from './useform.js'
 *
 * // Määritellään lomakkeen lähetyksen käsittelijä.
 * const submit = () => {
 *   console.log(values)
 * }
 *
 * // Määritellään lomakkeen alkutilanne.
 * const initial = { word: 'sana' }
 *
 * // Alustetaan useForm-käsittelijä.
 * const {values, handleChange, handleSubmit } = useForm(submit, initial, false)
 *
 * // Renderöidään lomake, joka käyttää useForm-hooksia.
 * return (
 *   &lt;form onSubmit={handleSubmit}>
 *     &lt;input type='input' name='word' value={values.word} onChange={handleChange} />
 *     &lt;button type='submit'>LÄHETÄ&lt;/button>
 *   &lt;/form>
 * )
 * 
 * @param   {function} callback
 *          Lomakekäsittelijä, jota kutsutaan kun lomakkeen tiedot lähetetään.
 * @param   {Object} [initialState = {} ]
 *          Lomakekenttien alkuarvot.
 * @param   {boolean} [resetOnSubmit = true]
 *          Alustetaanko lomake alkutilanteeseen tietojen lähetyksen yhteydessä.
 * @returns {useFormObject}
 *          Lomakekäsittelijän funktiot ja lomakkeen tiedot.
 */

const useForm = (callback, initialState={}, resetOnSubmit=true) => {

  // Esitellään useState-hooks, johon käyttäjän lomakkeelle
  // syöttämä tieto tallennetaan.
  const [values, setValues] = useState(initialState)

  // Syötekäsittelijä, joka tallentaa kentän tiedot
  // sen nimellä state-muuttujaan.
  const handleChange = (event) => {
    // Tallennetaan kenttään syötetty arvo ja kentän 
    // nimi välimuuttujiin.
    const value = event.target.value
    const key = event.target.name
    // Tallennetaan uusi arvo state-muuttujaan.
    // Hakasulkeilla avaimeksi määritetään muuttujan arvo.
    setValues(prevValues => ({...prevValues, [key]: value}))
  }

  // Submit-käsittelijä, joka estää oletustoiminnan ja
  // kutsuu määriteltyä callback-funktiota.
  // Alustaa tarvittaessa lomaketiedot alkutilanteeseen.
  const handleSubmit = (event) => {
    if (event) {
      event.preventDefault()
    }
    callback()
    if (resetOnSubmit) resetValues()
  }

  // Funktio, joka palauttaa lomakkeen tiedot alkutilanteeseen.
  const resetValues = () => {
    setValues(initialState)
  }

  // Palauta luonnin yhteydessä sekä käsittelijät että
  // tilamuuttuja.
  return {
    handleChange,
    handleSubmit,
    resetValues,
    setValues,
    values
  }

}

export default useForm</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#useForm">useForm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Nov 23 2023 11:47:01 GMT+0200 (Itä-Euroopan normaaliaika)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
